import sqlite3
import matplotlib.pyplot as plt

Public_stocks=['1101','1102','1103','1104','1108','1109','1110','1201','1203','1210','1213','1215','1216','1217','1218','1219','1220','1225','1227','1229','1231','1232','1233','1234','1235','1236','1256','1301','1303','1304','1305','1307','1308','1309','1310','1312','1313','1314','1315','1316','1319','1321','1323','1324','1325','1326','1337','1338','1339','1340','1341','1402','1409','1410','1413','1414','1416','1417','1418','1419','1423','1432','1434','1435','1436','1437','1438','1439','1440','1441','1442','1443','1444','1445','1446','1447','1449','1451','1452','1453','1454','1455','1456','1457','1459','1460','1463','1464','1465','1466','1467','1468','1470','1471','1472','1473','1474','1475','1476','1477','1503','1504','1506','1507','1512','1513','1514','1515','1516','1517','1519','1521','1522','1524','1525','1526','1527','1528','1529','1530','1531','1532','1533','1535','1536','1537','1538','1539','1540','1541','1558','1560','1568','1582','1583','1587','1589','1590','1592','1598','1603','1604','1605','1608','1609','1611','1612','1614','1615','1616','1617','1618','1626','1701','1702','1707','1708','1709','1710','1711','1712','1713','1714','1717','1718','1720','1721','1722','1723','1724','1725','1726','1727','1730','1731','1732','1733','1734','1735','1736','1737','1760','1762','1773','1776','1783','1786','1789','1795','1802','1805','1806','1808','1809','1810','1817','1902','1903','1904','1905','1906','1907','1909','2002','2006','2007','2008','2009','2010','2012','2013','2014','2015','2017','2020','2022','2023','2024','2025','2027','2028','2029','2030','2031','2032','2033','2034','2038','2049','2059','2062','2069','2101','2102','2103','2104','2105','2106','2107','2108','2109','2114','2115','2201','2204','2206','2207','2208','2227','2228','2231','2233','2236','2239','2243','2301','2302','2303','2305','2308','2312','2313','2314','2316','2317','2321','2323','2324','2327','2328','2329','2330','2331','2332','2337','2338','2340','2342','2344','2345','2347','2348','2349','2351','2352','2353','2354','2355','2356','2357','2358','2359','2360','2362','2363','2364','2365','2367','2368','2369','2371','2373','2374','2375','2376','2377','2379','2380','2382','2383','2385','2387','2388','2390','2392','2393','2395','2397','2399','2401','2402','2404','2405','2406','2408','2409','2412','2413','2414','2415','2417','2419','2420','2421','2423','2424','2425','2426','2427','2428','2429','2430','2431','2433','2434','2436','2438','2439','2440','2441','2442','2443','2444','2448','2449','2450','2451','2453','2454','2455','2456','2457','2458','2459','2460','2461','2462','2464','2465','2466','2467','2468','2471','2472','2474','2476','2477','2478','2480','2481','2482','2483','2484','2485','2486','2488','2489','2491','2492','2493','2495','2496','2497','2498','2499','2501','2504','2505','2506','2509','2511','2514','2515','2516','2520','2524','2527','2528','2530','2534','2535','2536','2537','2538','2539','2540','2542','2543','2545','2546','2547','2548','2597','2601','2603','2605','2606','2607','2608','2609','2610','2611','2612','2613','2614','2615','2616','2617','2618','2630','2633','2634','2636','2637','2642','2701','2702','2704','2705','2706','2707','2712','2722','2723','2727','2731','2739','2748','2801','2809','2812','2816','2820','2823','2832','2834','2836','2838','2841','2845','2849','2850','2851','2852','2855','2867','2880','2881','2882','2883','2884','2885','2886','2887','2888','2889','2890','2891','2892','2897','2901','2903','2904','2905','2906','2908','2910','2911','2912','2913','2915','2923','2929','2936','2939','3002','3003','3004','3005','3006','3008','3010','3011','3013','3014','3015','3016','3017','3018','3019','3021','3022','3023','3024','3025','3026','3027','3028','3029','3030','3031','3032','3033','3034','3035','3036','3037','3038','3040','3041','3042','3043','3044','3045','3046','3047','3048','3049','3050','3051','3052','3054','3055','3056','3057','3058','3059','3060','3062','3090','3094','3130','3149','3164','3167','3189','3209','3229','3231','3257','3266','3296','3305','3308','3311','3312','3321','3338','3346','3356','3376','3380','3383','3406','3413','3416','3419','3432','3437','3443','3450','3454','3481','3494','3501','3504','3515','3518','3528','3530','3532','3533','3535','3536','3545','3550','3557','3563','3576','3583','3588','3591','3593','3596','3605','3607','3617','3622','3645','3653','3661','3665','3669','3673','3679','3682','3686','3694','3698','3701','3702','3703','3704','3705','3706','3708','3711','3712','4104','4106','4108','4119','4133','4137','4141','4142','4144','4148','4155','4164','4190','4306','4414','4426','4438','4439','4526','4532','4536','4540','4545','4551','4552','4555','4557','4560','4562','4564','4566','4571','4572','4576','4720','4722','4725','4737','4739','4746','4755','4763','4764','4766','4807','4904','4906','4912','4915','4916','4919','4927','4930','4934','4935','4938','4942','4943','4952','4956','4958','4960','4961','4967','4968','4976','4977','4989','4994','4999','5007','5203','5215','5225','5234','5243','5258','5264','5269','5283','5284','5285','5288','5305','5388','5434','5469','5471','5484','5515','5519','5521','5522','5525','5531','5533','5534','5538','5607','5608','5706','5871','5876','5880','5906','5907','6005','6024','6108','6112','6115','6116','6117','6120','6128','6131','6133','6136','6139','6141','6142','6152','6153','6155','6164','6165','6166','6168','6172','6176','6177','6183','6184','6189','6191','6192','6196','6197','6201','6202','6205','6206','6209','6213','6214','6215','6216','6224','6225','6226','6230','6235','6239','6243','6251','6257','6269','6271','6277','6278','6281','6282','6283','6285','6288','6289','6405','6409','6412','6414','6415','6416','6431','6442','6443','6449','6451','6452','6456','6464','6477','6491','6504','6505','6525','6531','6533','6541','6552','6558','6573','6579','6581','6582','6591','6592','6605','6625','6641','6655','6666','6668','6669','6670','6671','6672','6674','6698','6706','6715','8011','8016','8021','8028','8033','8039','8046','8070','8072','8081','8101','8103','8104','8105','8110','8112','8114','8131','8150','8163','8201','8210','8213','8215','8222','8249','8261','8271','8341','8367','8374','8404','8411','8422','8427','8429','8442','8443','8454','8462','8463','8464','8466','8467','8473','8478','8480','8481','8482','8488','8497','8499','8926','8940','8996','9802','9902','9904','9905','9906','9907','9908','9910','9911','9912','9914','9917','9918','9919','9921','9924','9925','9926','9927','9928','9929','9930','9931','9933','9934','9935','9937','9938','9939','9940','9941','9942','9943','9944','9945','9946','9955','9958']
Overthecounter_stocks=['1240','1258','1259','1264','1268','1333','1336','1565','1569','1570','1580','1584','1586','1591','1593','1595','1597','1599','1742','1752','1777','1781','1784','1785','1788','1796','1799','1813','1815','2035','2061','2063','2064','2065','2066','2067','2070','2221','2230','2235','2596','2640','2641','2643','2718','2719','2724','2726','2729','2732','2734','2736','2740','2745','2752','2916','2924','2926','2928','2937','3064','3066','3067','3071','3073','3078','3081','3083','3085','3086','3088','3089','3092','3093','3095','3105','3114','3115','3118','3122','3128','3131','3141','3144','3147','3152','3162','3163','3169','3171','3176','3178','3188','3191','3202','3205','3206','3207','3211','3213','3217','3218','3219','3221','3224','3226','3227','3228','3230','3232','3234','3236','3252','3259','3260','3264','3265','3268','3272','3276','3284','3285','3287','3288','3289','3290','3293','3294','3297','3303','3306','3310','3313','3317','3322','3323','3324','3325','3332','3339','3354','3360','3362','3363','3372','3373','3374','3379','3388','3390','3402','3426','3434','3438','3441','3444','3455','3465','3466','3479','3483','3484','3489','3490','3491','3492','3498','3499','3508','3511','3512','3516','3520','3521','3522','3523','3526','3527','3529','3531','3537','3540','3541','3546','3548','3551','3552','3555','3556','3558','3562','3564','3567','3570','3577','3580','3581','3587','3594','3609','3611','3615','3623','3624','3625','3628','3629','3630','3631','3632','3642','3646','3652','3663','3664','3666','3672','3675','3680','3684','3685','3687','3689','3691','3693','3707','3709','3710','4102','4105','4107','4109','4111','4113','4114','4116','4120','4121','4123','4126','4127','4128','4129','4130','4131','4138','4139','4147','4152','4153','4154','4157','4160','4161','4162','4163','4167','4168','4171','4173','4174','4175','4183','4188','4192','4198','4205','4207','4303','4304','4305','4401','4402','4406','4413','4416','4417','4419','4420','4429','4430','4432','4433','4502','4503','4506','4510','4513','4523','4527','4528','4529','4530','4533','4534','4535','4538','4541','4542','4543','4549','4550','4554','4556','4561','4563','4568','4580','4609','4702','4706','4707','4711','4712','4714','4716','4721','4726','4728','4729','4735','4736','4741','4743','4744','4745','4747','4754','4760','4767','4803','4804','4806','4903','4905','4907','4908','4909','4911','4924','4931','4933','4939','4944','4946','4947','4950','4953','4966','4971','4972','4973','4974','4979','4987','4991','4995','5009','5011','5013','5014','5015','5016','5102','5201','5202','5205','5206','5209','5210','5211','5212','5213','5220','5223','5227','5230','5245','5251','5263','5272','5274','5276','5278','5281','5287','5289','5291','5299','5301','5302','5304','5306','5309','5310','5312','5314','5315','5321','5324','5328','5340','5344','5345','5347','5348','5349','5351','5353','5355','5356','5364','5371','5381','5383','5386','5392','5398','5403','5410','5425','5426','5432','5438','5439','5443','5450','5452','5455','5457','5460','5464','5465','5468','5474','5475','5478','5481','5483','5487','5488','5489','5490','5493','5498','5508','5511','5512','5514','5516','5520','5523','5529','5530','5536','5543','5601','5603','5604','5609','5701','5703','5704','5820','5864','5878','5902','5903','5904','5905','6015','6016','6020','6021','6023','6026','6101','6103','6104','6109','6111','6113','6114','6118','6121','6122','6123','6124','6125','6126','6127','6129','6130','6134','6138','6140','6143','6144','6146','6147','6148','6150','6151','6154','6156','6158','6160','6161','6163','6167','6169','6170','6171','6173','6174','6175','6179','6180','6182','6185','6186','6187','6188','6190','6194','6195','6198','6199','6203','6204','6207','6208','6210','6212','6217','6218','6219','6220','6221','6222','6223','6227','6228','6229','6231','6233','6234','6236','6237','6238','6240','6241','6242','6244','6245','6246','6247','6248','6259','6261','6263','6264','6265','6266','6270','6274','6275','6276','6279','6284','6287','6290','6291','6292','6294','6404','6411','6417','6418','6419','6425','6426','6432','6435','6438','6441','6446','6457','6461','6462','6465','6469','6470','6472','6482','6485','6486','6488','6492','6494','6496','6497','6499','6506','6508','6509','6510','6512','6514','6516','6523','6527','6530','6532','6535','6538','6542','6547','6548','6556','6560','6561','6568','6569','6570','6574','6576','6577','6578','6589','6590','6593','6594','6596','6603','6609','6612','6613','6615','6616','6624','6629','6640','6642','6643','6649','6654','6662','6664','6667','6679','6680','6683','6690','6697','6803','7402','8024','8027','8032','8034','8038','8040','8042','8043','8044','8047','8048','8049','8050','8054','8059','8064','8066','8067','8068','8069','8071','8074','8076','8077','8080','8083','8084','8085','8086','8087','8088','8091','8092','8093','8096','8097','8099','8107','8109','8111','8121','8147','8155','8171','8176','8182','8183','8234','8240','8255','8277','8279','8287','8289','8291','8299','8342','8349','8354','8358','8383','8390','8401','8403','8406','8409','8410','8415','8416','8418','8420','8421','8423','8424','8426','8431','8432','8433','8435','8436','8437','8440','8444','8446','8450','8455','8472','8476','8477','8489','8905','8906','8908','8916','8917','8921','8923','8924','8927','8928','8929','8930','8931','8932','8933','8934','8935','8936','8937','8938','8941','8942','9949','9950','9951','9960','9962']
RangeList=[999,5000,10000,15000,20000,30000,40000,50000,100000,200000,400000,600000,800000,1000000]
S5478=[71.5,72.3,72.5,74,77,77,76.8,74.6,75.5,74.1,70.6,69.6,70.8,70,71.7,72.4,73.5,73.4,73,72.2,72.2,70.3,69.5,71.2,73.5,73,77.9,79.2,80,82.3,82.2,81.9,78.1,78.2,77.8,77.6,74.6,77.8,79.1,78.3,77.5,78.1,79.9,80.5,82.1,82.1,82,81.1,78.5,80.1,83,79.7,81.1,68.5,65,70.8,74.2,80,81.5,82.3,83.6,89,105,119,107,112.5,99,106.5,113,116.5,111,114.5,102.5,101,107.5,106,94.6,93.7,91.6,89.7]
def Getdata(StockNo):
    conn = sqlite3.connect(r'C:\Users\mick7\OneDrive\桌面/Stock.db')
    c = conn.cursor()
    c.execute("SELECT DATE,PERCENT1,PERCENT2,PERCENT3,PERCENT4,PERCENT5,PERCENT6,PERCENT7,PERCENT8,PERCENT9,PERCENT10,PERCENT11,PERCENT12,PERCENT13,PERCENT14  from NO" + StockNo)
    data = c.fetchall()
    dates=[]
    stock1=[]
    stock2=[]
    stock3=[]
    stock4=[]
    stock5 = []
    stock6 = []
    stock7 = []
    stock8 = []
    stock9 = []
    stock10= []
    stock11 = []
    stock12 = []
    stock13 = []
    stock14 = []
    VALUE = [45,45.9980269106517,46.4307933848008,46.1303650367635,46.410590233127,44.8711250408857,44.6680758839158,43.7210269599387,43.3560832142233,44.2164232042763,44.6564328824327,43.8421111823033,43.4328102946909,42.9590538705904,42.1607749694197,42.041306999189,41.8266747019262,40.8690153819959,40.3878062397225,40.0907450836309,39.9644679030212,39.0602346952948,38.6464142878265,38.2182870559137,38.8859189095943,39.5638917838724,39.8721619478186,40.8504135171585,41.2176319880994,41.8005901883207,41.761321247586,42.394488021041,43.0196932562067,43.5913825873834,43.198857798309,42.8474875774588,43.2643609056245,43.8350325965687,43.6948376892505,43.4666767630151,43.8999969531729,44.8078367976055,45.0549886864142,45.4485161504236,45.7334703808085,47.4245789329832,47.1876184117965,46.9356327318837,46.7629631289121,47.4697142703521,47.1559518422102,46.9246033075995,46.7007074911619,46.3774420990846,46.9549379657052,47.3906825340639,46.3184488961972,44.8283093246349,44.4305616467204,45.3246633480148,45.4423803784338,45.1508264518354,45.0772121532554,45.249522589086,44.931345398171,44.4022921996747,44.3665550691584,44.084100043462,44.45631692378,43.4825998395935,43.6406184162772,44.3196837572754,44.1381098022698,43.3886776322569,42.8479515016824,42.5088677901094,43.3013102252411,43.7297966242948,42.1410806378622,40.715905422904,40.7209038322811,40.1666640380315]
    VALUE = S5478
    value_o =[0]
    stock1_o =[0]
    value = []
    for d in range(len(VALUE)):

        value.append(VALUE[d]/4)

    VALUE=value


    for r in range(len(VALUE)):
        if r != 0 :
            compare = VALUE[r]- VALUE[r-1]

            if compare >= 0:
                value_o.append(1)
            else:
                value_o.append(0)
    print(value_o)
    for a in sorted(data):
        dates.append(str(a[0]))
        #stock1.append(float(a[1].replace(",","")))
        #stock2.append(float(a[2].replace(",", "")))
        #stock3.append(float(a[3].replace(",", "")))
        #stock4.append(float(a[4].replace(",", "")))
        stock1.append(float(a[1]))
        stock2.append(float(a[2]))
        stock3.append(float(a[3]))
        stock4.append(float(a[4]))
        stock5.append(float(a[5]))
        stock6.append(float(a[6]))
        stock7.append(float(a[7]))
        stock8.append(float(a[8]))
        stock9.append(float(a[9]))
        stock10.append(float(a[10]))
        stock11.append(float(a[11]))
        stock12.append(float(a[12]))
        stock13.append(float(a[13]))
        stock14.append(float(a[14]))
    countt=len(stock1)-len(VALUE)
    print(countt)
    for lenn in range(0,countt):
        VALUE.insert(0,0)
        value_o.insert(0,0)

    for r in range(len(stock2)):
        if r != 0 :
            compare = stock2[r]- stock2[r-1]
            if compare >= 0:
                stock1_o.append(1)
            else:
                stock1_o.append(0)
    match = 0
    print(len(stock1_o))
    print(len(value_o))
    for count in range(len(stock1_o)):
        if stock1_o[count] == value_o[count]:
            match=match+1
        else:
            pass
    print(match/len(stock1_o))
    print(stock1_o)
    print(dates)
    #freq = 60
    #fig, ax = plt.subplots(1,1)
    #dates=['20190215', '20190223', '20190227', '20190308', '20190315']
    #stock1 = [0,4,2,1,3]
    #stock2 = [1,3,4,5,6]
    #stock3 = [2,3,4,5,6]
    #stock4 = [1,2,3,4,5]
    #plt.plot(dates,stock1,'-o')
    def plus(list1,list2):
        listc=[]
        for b in range(len(list1)):
            listc.append(list1[b]+list2[b])
        return listc

    low = plus(stock2,stock3)
    main = plus(stock4,stock5)
    main = plus(main, stock6)
    main = plus(main, stock7)
    main = plus(main, stock8)
    high = plus(stock9,stock10)
    high = plus(high, stock11)
    high = plus(high, stock12)
    holder = plus(stock13,stock14)
    print(VALUE)
    plt.plot(dates, low)
    plt.plot(dates, main)
    plt.plot(dates, high)
    plt.plot(dates, holder)
    plt.plot(dates, VALUE)
    #plt.plot(dates, stock1_o)
    #plt.plot(dates, value_o)
    #ax.set_xticks(dates[::freq])
    #ax.set_xticklabels(dates[::freq], rotation=30)
    plt.show()
    #for a in sorted(compare):
    #    print(str(a[0]))
    #    b = c.execute("SELECT PERSON1 FROM NO"+ StockNo +" where DATE = "+ str(a[0]))
    #    records = c.fetchall()
    #    records2=c.fetchone()
    #    print(records)
    #    print(records2)

Getdata('5478')